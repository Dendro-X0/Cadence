/* Desktop frameless window look */
[data-platform="desktop"] body{background:transparent}
[data-platform="desktop"] #app{padding:8px}
[data-platform="desktop"] .frame{box-shadow:var(--frame-shadow,0 16px 48px rgba(0,0,0,.45));background:var(--bg)}
[data-frame-shadow="off"]{--frame-shadow:none}
[data-frame-shadow="light"]{--frame-shadow:0 8px 24px rgba(0,0,0,.18)}
[data-frame-shadow="medium"]{--frame-shadow:0 16px 48px rgba(0,0,0,.35)}
[data-frame-shadow="strong"]{--frame-shadow:0 28px 72px rgba(0,0,0,.55)}
[data-platform="desktop"][data-theme="light"] .frame{box-shadow:0 24px 48px rgba(0,0,0,.12)}
.chips-actions{display:flex;gap:8px;justify-content:center;margin-top:6px}
/* Tabs */
.tabs{display:flex;gap:8px;margin:8px 0 16px}
.tabs-bottom{display:none}
.tab{background:var(--surface-2);color:var(--fg);border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
.tab.active{background:var(--brand);color:#001018}
.tabs-switch{animation:tabsSwitch .22s ease}
@keyframes tabsSwitch{from{opacity:.6;transform:translateY(-2px)}to{opacity:1;transform:none}}

:root{--bg:#0b1020;--fg:#e2e8f0;--muted:#94a3b8;--brand:#0ea5e9;--brand2:#22d3ee;--card:#111827;--accent:#38bdf8;--border:#1f2937;--surface-2:#1f2937;--input-bg:#0f172a}
*{box-sizing:border-box}
html,body,#app{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
.frame{height:100%;display:flex;flex-direction:column;border-radius:var(--frame-radius,16px);overflow:auto;background:transparent}
.frame .container{max-width:860px;margin:0 auto;padding:24px;width:100%}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.brand{display:flex;gap:8px;align-items:center}
.brand__logo{width:28px;height:28px}
.brand__title{font-weight:700}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
.timer{display:flex;flex-direction:column;align-items:center;gap:16px}
.timer__display{position:relative;height:320px;display:flex;align-items:center;justify-content:center;gap:24px;width:100%}
.block-labels{display:flex;gap:16px;opacity:.9}
.time{font-weight:800;letter-spacing:1px}
.controls{display:flex;gap:10px;justify-content:center;width:100%}
.btn{background:var(--surface-2);color:var(--fg);border:1px solid var(--border);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700;transition:transform .08s ease,background .2s ease,box-shadow .2s ease}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn.primary,.btn.active{background:var(--brand);color:#001018;border-color:transparent;box-shadow:0 4px 14px rgba(0,0,0,.25);background-image:linear-gradient(135deg,var(--brand),var(--brand2))}
.btn.secondary{background:var(--surface-2);color:var(--fg)}
.btn.danger{background:#ef4444;color:#fff;border-color:transparent}
.settings{display:flex;gap:8px;align-items:center}
.input{background:var(--input-bg);color:var(--fg);border:1px solid var(--border);border-radius:8px;padding:8px 10px;width:80px}
.tasks{margin-top:16px}
.task-row{display:flex;align-items:center;gap:8px;padding:8px 0;border-bottom:1px solid var(--border)}
.task-row:last-child{border-bottom:none}
.task-row input[type=checkbox]{transform:scale(1.2)}
.task-title.done{text-decoration:line-through;color:var(--muted)}
.toast{position:fixed;left:50%;bottom:16px;transform:translateX(-50%);background:var(--card);border:1px solid var(--border);color:var(--fg);padding:10px 12px;border-radius:10px;display:none}
.toast.show{display:block}
.toast--action{display:flex;align-items:center;gap:8px}

/* Offline banner */
#offline-banner{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:var(--card);border:1px solid var(--border);color:var(--fg);padding:8px 12px;border-radius:999px;display:none;z-index:120;box-shadow:0 10px 24px rgba(0,0,0,.25)}
#offline-banner.show{display:block}

/* Themes */
[data-theme="light"]{--bg:#f1f5f9;--fg:#0b1324;--muted:#475569;--brand:#2563eb;--brand2:#60a5fa;--card:#ffffff;--accent:#2563eb;--border:#cbd5e1;--surface-2:#e5e7eb;--input-bg:#eef2f7}
[data-accent="ocean"]{--brand:#0ea5e9;--brand2:#22d3ee;--accent:#38bdf8}
[data-accent="violet"]{--brand:#7c3aed;--brand2:#a78bfa;--accent:#a855f7}
[data-accent="sunset"]{--brand:#f97316;--brand2:#f43f5e;--accent:#fb923c}
[data-theme="amoled"]{--bg:#000;--fg:#d1d5db;--muted:#6b7280;--brand:#22d3ee;--card:#050505;--accent:#06b6d4}

/* Circular timer */
.circle-wrap{width:240px;height:240px;position:relative;display:none}
.circle-wrap.show{display:block}
.circle-wrap svg{transform:rotate(-90deg)}
.circle-bg{stroke:var(--border);stroke-width:14;fill:none}
.circle-prog{stroke:var(--accent);stroke-linecap:round;stroke-width:14;fill:none;transition:stroke-dashoffset .2s linear}
.circle-center{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:40px;font-weight:800}
.circle-wrap.block-pop{animation:blockPop .26s cubic-bezier(.2,1,.2,1)}
@keyframes blockPop{0%{transform:scale(.98)}60%{transform:scale(1.03)}100%{transform:scale(1)}}
.now-chip{position:absolute;left:50%;top:8px;transform:translateX(-50%);padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px;border:1px solid var(--border);background:var(--surface-2);color:var(--fg);box-shadow:0 2px 10px rgba(0,0,0,.25)}
.now-chip[data-type="focus"]{background:#38bdf8;color:#001018}
.now-chip[data-type="break"]{background:#22c55e;color:#001018}
.now-chip[data-type="meditation"]{background:#a855f7;color:#fff}
.now-chip[data-type="workout"]{background:#f59e0b;color:#001018}
.now-chip[data-type="rest"]{background:#14b8a6;color:#001018}

/* Mode-specific styles */
.timer--digital .time{font-size:clamp(56px, 12vw, 120px)}
.timer--digital .circle-wrap{display:none !important}
.timer--circular .time{display:none}
.timer--circular .circle-wrap{display:block}

/* Subtle animation when switching modes */
.mode-switch{animation:modeFade .25s ease}
@keyframes modeFade{from{opacity:.6;transform:scale(.985)}to{opacity:1;transform:scale(1)}}

/* Page fade/slide in */
.page{opacity:1;transform:none}
.page.fade-in{animation:pageIn .28s cubic-bezier(.2,.8,.2,1)}
@keyframes pageIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

/* Settings panel */
.settings-panel{position:fixed;right:16px;top:64px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px;min-width:260px;display:none;z-index:30}
.settings-panel.show{display:block}
.settings-panel.view{position:static;display:block;min-width:0;width:100%;margin-top:8px}
.settings-row{display:flex;justify-content:space-between;align-items:center;margin:8px 0}
.switch{appearance:none;width:40px;height:22px;background:var(--surface-2);border-radius:20px;position:relative;outline:none;cursor:pointer}
.switch:checked{background:var(--brand)}
.switch:before{content:"";position:absolute;top:3px;left:3px;width:16px;height:16px;background:#fff;border-radius:50%;transition:left .2s}
.switch:checked:before{left:21px}
.select{background:var(--input-bg);color:var(--fg);border:1px solid var(--border);border-radius:8px;padding:6px 8px}
.gear{background:var(--surface-2);color:var(--fg)}
.header{-webkit-app-region:drag;background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,0));border-radius:16px;padding:12px 16px;position:relative;z-index:2}
/* Glass effect (Windows acrylic-like) */
[data-glass="acrylic"] .header{backdrop-filter:saturate(160%) blur(14px);-webkit-backdrop-filter:saturate(160%) blur(14px)}
[data-glass="off"] .header{backdrop-filter:none;-webkit-backdrop-filter:none}
.no-drag{-webkit-app-region:no-drag}
.win-controls{display:none;gap:6px;margin-left:8px}
.win-controls .btn{padding:6px 10px;border-radius:8px;border:1px solid var(--border)}
[data-platform="desktop"] .win-controls .btn.secondary{background:var(--surface-2);color:var(--fg)}
[data-platform="desktop"] .win-controls .btn.danger{background:#ef4444;color:#fff;border-color:transparent}
[data-platform="desktop"] .win-controls{display:flex}
.win-controls .btn{transition:transform .08s ease, background .2s ease, box-shadow .2s ease}
.win-controls .btn:hover{transform:translateY(-1px);filter:brightness(1.05)}
.win-controls .btn:active{transform:translateY(0);filter:brightness(1)}

/* Compact header toggle */
/* Header densities */
[data-header-density="compact"] .header{padding:8px 10px;border-radius:12px}
[data-header-density="compact"] .frame .container{padding:16px}
[data-header-density="ultra"] .header{padding:4px 8px;border-radius:10px}
[data-header-density="ultra"] .frame .container{padding:10px}

/* Mini bubble */
#mini{position:fixed;right:16px;bottom:16px;background:var(--card);border:1px solid var(--border);color:var(--fg);padding:10px 12px;border-radius:12px;display:none;z-index:40}
#mini.show{display:block}
#mini .mini-time{font-size:18px;font-weight:700}

/* Collapsible */
.collapsible__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.collapsible .collapsible__content{overflow:hidden;transition:max-height .3s ease}
.collapsible.collapsed .collapsible__content{pointer-events:none}

/* Template list styling */
.tpl-row{display:flex;align-items:center;justify-content:space-between;padding:12px 6px;border-bottom:1px solid var(--border)}
.tpl-left{display:flex;flex-direction:column}
.tpl-title{font-weight:700}
.tpl-meta{color:var(--muted);font-size:12px}
.tpl-actions{display:flex;gap:8px}

/* Quick template chips */
.chips{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:8px}
.chip{background:var(--surface-2);color:var(--fg);border:none;padding:6px 10px;border-radius:999px;cursor:pointer;font-weight:600}
.chip:hover{filter:brightness(1.1)}
.chip.pinned{box-shadow:0 0 0 2px rgba(255,215,0,.4) inset}
.pin-ico{margin-right:6px;color:#ffd700}
.tpl-row.pinned .tpl-title .pin-ico{color:#ffd700}
.chip:focus{outline:2px solid var(--brand);outline-offset:2px}
.btn:focus-visible,.tab:focus-visible,.input:focus-visible,.select:focus-visible{outline:2px solid var(--brand);outline-offset:2px}
.btn:focus-visible{box-shadow:0 0 0 3px rgba(14,165,233,.35)}
.chip.pop{animation:chipPop .35s cubic-bezier(.2,1,.2,1)}
@keyframes chipPop{0%{transform:scale(.92);opacity:0}60%{transform:scale(1.04);opacity:1}100%{transform:scale(1)}}

/* Overlays */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:100}
.overlay__card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;min-width:280px;max-width:90%}
.overlay__title{font-weight:800;margin-bottom:8px}
.overlay__count{font-size:48px;font-weight:900;text-align:center;margin:8px 0}
.overlay__count{animation:countPop .6s ease infinite alternate}
@keyframes countPop{from{transform:scale(.98)}to{transform:scale(1.02)}}
.overlay__actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.overlay__content .sc-row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border)}
.overlay__content .sc-row:last-child{border-bottom:none}

/* Pager */
.pager-host{display:flex;justify-content:center;margin-top:8px}
.pager{display:flex;gap:12px;align-items:center}
.pager__info{color:var(--muted)}

/* Small screens */
@media (max-width: 420px){
  .timer__display{height:260px}
  .controls{flex-wrap:wrap}
}
